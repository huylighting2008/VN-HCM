local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local VirtualInputManager = game:GetService("VirtualInputManager")

local player = Players.LocalPlayer
local pGui = player:WaitForChild("PlayerGui")

-- ===== TOGGLE =====
local ENABLED = true

-- ===== GUI =====
local gui = Instance.new("ScreenGui", pGui)
gui.Name = "AutoQTE_GUI"
gui.ResetOnSpawn = false

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0, 180, 0, 40)
frame.Position = UDim2.new(0.5, -90, 0.85, 0)
frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true

Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 10)

local label = Instance.new("TextLabel", frame)
label.Size = UDim2.new(1, 0, 1, 0)
label.BackgroundTransparency = 1
label.Font = Enum.Font.GothamBold
label.TextSize = 14
label.TextColor3 = Color3.fromRGB(0, 255, 120)
label.Text = "ðŸŸ¢ AUTO QTE: ON"

-- ALT PHáº¢I toggle
UserInputService.InputBegan:Connect(function(input, gp)
    if gp then return end
    if input.KeyCode == Enum.KeyCode.RightAlt then
        ENABLED = not ENABLED
        if ENABLED then
            label.Text = "ðŸŸ¢ AUTO QTE: ON"
            label.TextColor3 = Color3.fromRGB(0, 255, 120)
        else
            label.Text = "ðŸ”´ AUTO QTE: OFF"
            label.TextColor3 = Color3.fromRGB(255, 80, 80)
        end
    end
end)

-- ===== HÃ€M NHáº¤N PHÃM =====
local function pressKey(keyName)
    local keyCode = Enum.KeyCode[keyName]
    if keyCode then
        VirtualInputManager:SendKeyEvent(true, keyCode, false, game)
        task.wait(0.05)
        VirtualInputManager:SendKeyEvent(false, keyCode, false, game)
    end
end

-- ===== HEARTBEAT =====
RunService.Heartbeat:Connect(function()
    if not ENABLED then return end  -- ðŸ”´ DÃ’NG QUAN TRá»ŒNG

    for _, gui in ipairs(pGui:GetChildren()) do
        if gui:IsA("ScreenGui") and gui.Enabled then
            for _, element in ipairs(gui:GetDescendants()) do
                if element:IsA("TextLabel") and element.Visible then
                    local text = element.Text:upper()
                    if #text == 1 and text:match("%a") then
                        local pos = element.AbsolutePosition
                        local screenSize = gui.AbsoluteSize

                        if pos.Y > screenSize.Y * 0.3 and pos.Y < screenSize.Y * 0.7 then
                            pressKey(text)
                            task.wait(0.12)
                        end
                    end
                end
            end
        end
    end
end)

print("[AUTO QTE] Loaded | RightAlt to toggle")
